<!DOCTYPE html><html lang="ko"><head><meta charset="UTF-8"/><meta property="og:site_name" content="í˜¸êµ¬ë§ˆì¸„ë¡œê·¸"/><link rel="canonical" href="https://hogumachu.github.io/articles/arc"/><meta name="twitter:url" content="https://hogumachu.github.io/articles/arc"/><meta property="og:url" content="https://hogumachu.github.io/articles/arc"/><title>ARC | í˜¸êµ¬ë§ˆì¸„ë¡œê·¸</title><meta name="twitter:title" content="ARC | í˜¸êµ¬ë§ˆì¸„ë¡œê·¸"/><meta property="og:title" content="ARC | í˜¸êµ¬ë§ˆì¸„ë¡œê·¸"/><meta name="description" content="Swiftì—ì„œ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ARC"/><meta name="twitter:description" content="Swiftì—ì„œ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ARC"/><meta property="og:description" content="Swiftì—ì„œ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ ìœ„í•´ ì‚¬ìš©í•˜ëŠ” ARC"/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/Theme/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to í˜¸êµ¬ë§ˆì¸„ë¡œê·¸"/></head><body class="item-page"><div class="wrapper"><header><div class="wrapper"><a href="/" class="header-logo"><img src="/Image/logo.svg"/></a><nav class="navbar__menu"><ul><li><a href="/articles" class="selected">ì•„í‹°í´</a></li><li><a href="/projects" class="not-selected">í”„ë¡œì íŠ¸</a></li><li><a href="/algorithm" class="not-selected">ì•Œê³ ë¦¬ì¦˜</a></li><li><a href="/about" class="not-selected">í˜¸êµ¬ë§ˆì¸„</a></li></ul></nav><a href="#" class="navbar__toggleBtn"><img src="/Image/align-justify.svg"/></a></div></header><div class="content-wrapper"><article><h1>ARC</h1><ul class="tag-list"><li><a href="/tags/article">Article</a></li><li><a href="/tags/swift">Swift</a></li><li><a href="/tags/memory">Memory</a></li></ul><div class="content"><h1>ARC</h1><pre><code><span class="type">Automatic Reference Counting</span> - ìë™ ì°¸ì¡° ì¹´ìš´íŒ…
</code></pre><p>âœ”ï¸ <b>Swiftì—ì„œ ì œê³µí•˜ëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬</b></p><p>âœ”ï¸ <b>Referenceì— ëŒ€í•œ ì°¸ì¡° íšŸìˆ˜</b>ë¥¼ ìë™ìœ¼ë¡œ ê´€ë¦¬í•´ì¤Œ</p><p>âœ”ï¸ ì»´íŒŒì¼í•  ë•Œ retain/releaseì½”ë“œë¥¼ ì‘ì„±í•´ì¤Œ</p><p>âœ”ï¸ ì°¸ì¡°í•  ë•Œ Reference Countë¥¼ ì¦ê°€ì‹œí‚¤ê³  ì°¸ì¡°í•˜ì§€ ì•Šì„ ë•Œ Reference Countë¥¼ ê°ì†Œì‹œí‚´</p><p>âœ”ï¸ Reference Countê°€ 0ì´ ë˜ë©´ ë©”ëª¨ë¦¬ì—ì„œ í•´ì œí•¨</p><h2>Strong Reference Cycle</h2><p>âœ”ï¸ <b>ê°•í•œ ì°¸ì¡° ì‚¬ì´í´</b></p><p>âœ”ï¸ ë©”ëª¨ë¦¬ê°€ í•´ì œë˜ì–´ì•¼ í•˜ëŠ” ìƒí™©ì¸ë° ì„œë¡œ ì°¸ì¡°ë¥¼ í•˜ê³  ìˆì–´ Reference Countê°€ 0ì´ ë˜ì§€ ì•ŠëŠ” ìƒí™©</p><pre><code><span class="keyword">import</span> Foundation

<span class="keyword">class</span> Human {
    <span class="keyword">var</span> device: <span class="type">Device</span>?
    
    <span class="keyword">init</span>(device: <span class="type">Device</span>? = <span class="keyword">nil</span>) {
        <span class="keyword">self</span>.<span class="property">device</span> = device
    }
}


<span class="keyword">class</span> Device {
    <span class="keyword">var</span> owner: <span class="type">Human</span>?
    
    <span class="keyword">init</span>(owner: <span class="type">Human</span>? = <span class="keyword">nil</span>) {
        <span class="keyword">self</span>.<span class="property">owner</span> = owner
    }
}

<span class="keyword">var</span> human: <span class="type">Human</span>? = <span class="type">Human</span>() <span class="comment">// RC = 1</span>
<span class="keyword">var</span> device: <span class="type">Device</span>? = <span class="type">Device</span>() <span class="comment">// RC = 1</span>
human?.<span class="property">device</span> = device <span class="comment">// RC = 2</span>
device?.<span class="property">owner</span> = human <span class="comment">// RC = 2</span>

human = <span class="keyword">nil</span> <span class="comment">// RC = 1</span>
device = <span class="keyword">nil</span> <span class="comment">// RC = 1</span>
</code></pre><p>âœ”ï¸ ì˜ˆì‹œì²˜ëŸ¼ ì„œë¡œê°€ ì„œë¡œë¥¼ ì°¸ì¡°í•˜ê³  ìˆì„ ë•ŒëŠ” ë©”ëª¨ë¦¬ì— ê³„ì† ë‚¨ì•„ìˆìŒ</p><p>âœ”ï¸ ìœ„ì™€ ê°™ì€ ìƒí™©ì´ ë°˜ë³µë˜ë©´ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” ê°ì²´ê°€ ë§ì•„ì§€ê³  ë©”ëª¨ë¦¬ ë¶€ì¡±ì„ ì•¼ê¸°í•  ìˆ˜ ìˆìŒ</p><h2>í•´ê²° ë°©ë²•</h2><p>âœ”ï¸ <b>ë¯¸ì†Œìœ  ì°¸ì¡°</b> ë˜ëŠ” <b>ì•½í•œ ì°¸ì¡°</b>ë¥¼ ì‚¬ìš©í•˜ë©´ Reference Countë¥¼ ì¦ê°€ì‹œí‚¤ì§€ ì•Šê¸° ë•Œë¬¸ì— ìœ„ì˜ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆìŒ</p><pre><code><span class="keyword">import</span> Foundation

<span class="keyword">class</span> Human {
    <span class="keyword">unowned var</span> device: <span class="type">Device</span>?
    
    <span class="keyword">init</span>(device: <span class="type">Device</span>? = <span class="keyword">nil</span>) {
        <span class="keyword">self</span>.<span class="property">device</span> = device
    }
}


<span class="keyword">class</span> Device {
    <span class="keyword">weak var</span> owner: <span class="type">Human</span>?
    
    <span class="keyword">init</span>(owner: <span class="type">Human</span>? = <span class="keyword">nil</span>) {
        <span class="keyword">self</span>.<span class="property">owner</span> = owner
    }
}

<span class="keyword">var</span> human: <span class="type">Human</span>? = <span class="type">Human</span>() <span class="comment">// RC = 1</span>
<span class="keyword">var</span> device: <span class="type">Device</span>? = <span class="type">Device</span>() <span class="comment">// RC = 1</span>
human?.<span class="property">device</span> = device <span class="comment">// ë³€í™” ì—†ìŒ</span>
device?.<span class="property">owner</span> = human <span class="comment">// ë³€í™” ì—†ìŒ</span>

human = <span class="keyword">nil</span> <span class="comment">// RC = 0</span>
device = <span class="keyword">nil</span> <span class="comment">// RC = 0</span>
</code></pre><h3>unowned - ë¯¸ì†Œìœ  ì°¸ì¡°</h3><p>âœ”ï¸ Reference Countë¥¼ ì¦ê°€ì‹œí‚¤ì§€ ì•Šê³  ìˆëŠ” ê·¸ëŒ€ë¡œ ê°’ì„ ê°€ì ¸ì˜´</p><b>ì¥ì </b><p>: ì˜µì…”ë„ ì²´ì´ë‹ì„ í•˜ì§€ ì•Šê³  ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆìŒ</p><b>ë‹¨ì </b><p>: ë§Œì•½ ë©”ëª¨ë¦¬ì—ì„œ í•´ì œëœ ê°’ì„ ì°¸ì¡°í•˜ê²Œ ë˜ë©´ ì•±ì´ ê°•ì œ ì¢…ë£Œ (ì¹˜ëª…ì )</p><h3>weak - ì•½í•œ ì°¸ì¡°</h3><p>âœ”ï¸ Reference Countë¥¼ ì¦ê°€ì‹œí‚¤ì§€ ì•Šê³  Optionalë¡œ ê°’ì„ ê°€ì ¸ì˜´</p><b>ì¥ì </b><p>: ê°’ì´ í•´ì œë˜ì—ˆì„ ë•Œ nil ë¡œ ë°›ê¸° ë•Œë¬¸ì— ì•ˆì „í•¨</p><b>ë‹¨ì </b><p>: ì˜µì…”ë„ ì²´ì´ë‹ì„ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì½”ë“œ ê¸¸ì´ê°€ ëŠ˜ì–´ë‚¨</p><pre><code><span class="keyword">func</span> weakMethod() {
    <span class="call">doSomething</span> { [<span class="keyword">weak self</span>] <span class="keyword">_ in
        guard let self else</span> { <span class="keyword">return</span> }
        <span class="keyword">self</span>.<span class="call">doAnything</span>()
    }
}

<span class="keyword">func</span> unownedMethod() {
    <span class="call">doSomething</span> { [<span class="keyword">unowned self</span>] <span class="keyword">_ in
        self</span>.<span class="call">doAnything</span>()
    }
}
</code></pre><h2>ğŸ¤”</h2><b>weakì°¸ì¡°ëŠ” ì˜µì…”ë„ ì²´ì´ë‹ì„ ìœ„í•œ ì½”ë“œ 1ì¤„ë§Œ ë“¤ì–´ê°€ë©´ ë˜ëŠ”ë° êµ³ì´ unownedê°€ ìˆëŠ” ì´ìœ ê°€ ìˆì„ê¹Œ</b></div></article></div><footer><a href="/" class="footer-logo"><img src="/Image/Footer/footer-logo.svg"/></a><a href="https://github.com/johnsundell/publish" class="footer-content">Generated By</a><a href="http://www.wtfpl.net/" class="footer-content">License</a><a href="/about" class="footer-content">Contact</a></footer></div><script src="/Javascript/header.js"></script></body></html>